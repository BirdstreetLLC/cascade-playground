<div class="flex flex-col rounded border border-gray-200 bg-white py-4">
  <div class="flex justify-center items-center px-4">
    <app-pill [label]="status" [pillStyle]="status === statusEnum.Active ? pillStyleEnum.Primary : status === statusEnum.Launched ? pillStyleEnum.Tertiary : pillStyleEnum.Standard" tooltipPosition="top" [pTooltip]="status === statusEnum.Active ? 'The program is currently active and members are engaging with it' : status === statusEnum.Complete ? 'The program has been completed successfully and is available for outcome analysis' : 'The program has been recently launched'" />
    <div class="flex-1"></div>
    <app-program-tiered-menu [isPublished]="status === statusEnum.Complete" />
  </div>

  <div class="flex flex-col mt-1 justify-start w-full items-start px-4">
    <h2 [style]="{ color: cascade.cascadeBrand.greyDarkest, fontSize: '18px' }">
      {{ title }}
    </h2>
    <div class="flex flex-row justify-center items-center gap-1">
      <span class="text-gray-400">Start Date: </span> {{ startDate }}
      <mat-icon
        [style]="{ color: cascade.cascadeBrand.greyDark, fontSize: '14px' }"
        class="mt-2 ml-2"
        >arrow_forward</mat-icon
      >
      {{ endDate }}
    </div>
  </div>

  <div
    class="flex justify-start w-full items-center px-4 py-2 my-2"
    [style]="{
      backgroundColor:
        engagementRateSubtitle.includes('ahead of benchmarks')
          ? cascade.cascadeAlias.tertiary
          : cascade.cascadeBrand.greyDark,
    }"
    tooltipPosition="top" pTooltip="Percentage of members who engaged with this program"
  >
    <div *ngIf="engagementRateSubtitle.includes('ahead of benchmarks')">
      <img
        src="https://res.cloudinary.com/dbrkk86kt/image/upload/v1756230956/mpulse/program-manager-prototype/person_celebrate_24dp_E8EAED_FILL0_wght400_GRAD0_opsz24_1_ug0rfe.png"
        width="24"
        height="24"
      />
    </div>
    <div *ngIf="!engagementRateSubtitle.includes('ahead of benchmarks')">
      <mat-icon class="mt-1" [style]="{ color: 'white', fontSize: '24px' }"
        >sentiment_dissatisfied</mat-icon
      >
    </div>
    <div class="flex flex-col ml-2">
      <span [style]="{ color: 'white', fontSize: '16px' }"
        >{{ engagementRate }}% {{ engagementRateTitle }}
      </span>
      <span [style]="{ color: 'white', fontSize: '12px' }">{{
        engagementRateSubtitle
      }}</span>
    </div>
  </div>

  <div class="flex justify-center items-center w-full items-start px-4 pt-2">
    <div class="flex flex-col justify-center items-center" tooltipPosition="top" [pTooltip]="getDefinition(tooltipEnum.MemberList)">
      <span class="font-bold">{{ memberList | number }}</span>
      <span class="text-gray-400">Member list</span>
    </div>
    <div class="flex-1"></div>
    <div class="flex flex-col justify-center items-center" tooltipPosition="top" [pTooltip]="getDefinition(tooltipEnum.Engaged)">
      <span class="font-bold">{{ engaged | number }}</span>
      <span class="text-gray-400">Engaged</span>
    </div>
    <div class="flex-1"></div>
    <div class="flex flex-col justify-center items-center" tooltipPosition="top" [pTooltip]="getDefinition(tooltipEnum.UnableToReach)">
      <span class="font-bold">{{ unableToReach | number }}</span>
      <span class="text-gray-400">Unengaged</span>
    </div>
    <div class="flex-1"></div>
    <div class="flex flex-col justify-center items-center" tooltipPosition="top" [pTooltip]="getDefinition(tooltipEnum.OptOutRate)">
      <span class="font-bold">{{ optedOut | number }}</span>
      <span class="text-gray-400">Opt Out Rate</span>
    </div>
  </div>

  <div
    class="flex justify-end items-center w-full items-start px-4 mt-4 pt-4 border-t border-gray-200"
  >
    <div>
      <a [routerLink]="['/program', title]">
        <p-button styleClass="p-button-outlined p-button-secondary">
          View Results
        </p-button>
      </a>
    </div>
  </div>
</div>
